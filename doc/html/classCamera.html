<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>metroVision: Camera Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Camera Class Reference</h1><!-- doxytag: class="Camera" -->
<p><a href="classCamera-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abf9aaac18c8a268705dd7009017ce961"></a><!-- doxytag: member="Camera::Camera" ref="abf9aaac18c8a268705dd7009017ce961" args="(PlayerCc::PlayerClient &amp;robot, PlayerCc::BlobfinderProxy &amp;blobProxy, PlayerCc::CameraProxy &amp;camProxy)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>Camera</b> (PlayerCc::PlayerClient &amp;robot, PlayerCc::BlobfinderProxy &amp;blobProxy, PlayerCc::CameraProxy &amp;camProxy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">IplImage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCamera.html#a02d5576415e72e46c717f6b1221fa4a4">captureImage</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">IplImage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCamera.html#a9d6533c84114b0724d28b940ed774362">edgeDetection</a> (IplImage *in, double lowThresh, double highThresh, double aperture)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">IplImage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCamera.html#ac5c9f313998f788fa4924a1a341fd96a">doCanny</a> (IplImage *in, double lowThresh, double highThresh, double aperture)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCamera.html#ab2cdb9c79a3058c31fe3ccd04c8b4982">drawBlobs</a> (IplImage *in)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCamera.html#a291c3ab32f380f2e8e9258793daeff5d">displayStream</a> (char *windowName)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCamera.html#af4d89ca5c815928bdf8cf1cf8cb0f058">displayBlobs</a> (char *windowName)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCamera.html#a5ac21f1748d653d29a4173814386029c">displayTetris</a> (char *windowName)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCamera.html#a5d6b9a8b9772301c7fd6be163bea0187">angle</a> (CvPoint *pt1, CvPoint *pt2, CvPoint *pt0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">CvSeq *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCamera.html#a21b8d96617b3fede0373a7af8f998bb6">findTetris</a> (IplImage *img, CvMemStorage *storage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCamera.html#a7b2811cc03fcdafa686a76863f2847c1">drawTetris</a> (IplImage *img, CvSeq *tetrisPieces)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCamera.html#ae03f9b6de6de4ff54394006116901cf1">loadCascade</a> (const char *cascadeName)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCamera.html#a463b40c912469d22df3ca81bb85bbf60">detectAndDrawHaar</a> (IplImage *img, double scale=1.3)</td></tr>
</table>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a5d6b9a8b9772301c7fd6be163bea0187"></a><!-- doxytag: member="Camera::angle" ref="a5d6b9a8b9772301c7fd6be163bea0187" args="(CvPoint *pt1, CvPoint *pt2, CvPoint *pt0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Camera::angle </td>
          <td>(</td>
          <td class="paramtype">CvPoint *&nbsp;</td>
          <td class="paramname"> <em>pt1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CvPoint *&nbsp;</td>
          <td class="paramname"> <em>pt2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CvPoint *&nbsp;</td>
          <td class="paramname"> <em>pt0</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This helper function finds the cosine of an angle between two vectors from pt0 to pt1 and then pt0 to pt2. Used by <a class="el" href="classCamera.html#a21b8d96617b3fede0373a7af8f998bb6">findTetris()</a> to identify right angles. From OpenCV examples. </p>

</div>
</div>
<a class="anchor" id="a02d5576415e72e46c717f6b1221fa4a4"></a><!-- doxytag: member="Camera::captureImage" ref="a02d5576415e72e46c717f6b1221fa4a4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IplImage * Camera::captureImage </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Captures image from the Player <a class="el" href="classCamera.html">Camera</a> proxy and converts it to standard BGR IplImage format </p>

</div>
</div>
<a class="anchor" id="a463b40c912469d22df3ca81bb85bbf60"></a><!-- doxytag: member="Camera::detectAndDrawHaar" ref="a463b40c912469d22df3ca81bb85bbf60" args="(IplImage *img, double scale=1.3)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Camera::detectAndDrawHaar </td>
          <td>(</td>
          <td class="paramtype">IplImage *&nbsp;</td>
          <td class="paramname"> <em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>scale</em> = <code>1.3</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Detects and draws The Objects that have been defined in the .xml cascade file. </p>

</div>
</div>
<a class="anchor" id="af4d89ca5c815928bdf8cf1cf8cb0f058"></a><!-- doxytag: member="Camera::displayBlobs" ref="af4d89ca5c815928bdf8cf1cf8cb0f058" args="(char *windowName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Camera::displayBlobs </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>windowName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Displays images that have had blobdetection performed on them. </p>

</div>
</div>
<a class="anchor" id="a291c3ab32f380f2e8e9258793daeff5d"></a><!-- doxytag: member="Camera::displayStream" ref="a291c3ab32f380f2e8e9258793daeff5d" args="(char *windowName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Camera::displayStream </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>windowName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Displays images from the Player camera proxy. </p>

</div>
</div>
<a class="anchor" id="a5ac21f1748d653d29a4173814386029c"></a><!-- doxytag: member="Camera::displayTetris" ref="a5ac21f1748d653d29a4173814386029c" args="(char *windowName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Camera::displayTetris </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>windowName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Displays images that have had tetrisdetection performed on them. </p>

</div>
</div>
<a class="anchor" id="ac5c9f313998f788fa4924a1a341fd96a"></a><!-- doxytag: member="Camera::doCanny" ref="ac5c9f313998f788fa4924a1a341fd96a" args="(IplImage *in, double lowThresh, double highThresh, double aperture)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IplImage * Camera::doCanny </td>
          <td>(</td>
          <td class="paramtype">IplImage *&nbsp;</td>
          <td class="paramname"> <em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>lowThresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>highThresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>aperture</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Performs canny detection on input image and returns canny detected image. Perform canny detection on new image so that it is non-destructive to original image. </p>

</div>
</div>
<a class="anchor" id="ab2cdb9c79a3058c31fe3ccd04c8b4982"></a><!-- doxytag: member="Camera::drawBlobs" ref="ab2cdb9c79a3058c31fe3ccd04c8b4982" args="(IplImage *in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Camera::drawBlobs </td>
          <td>(</td>
          <td class="paramtype">IplImage *&nbsp;</td>
          <td class="paramname"> <em>image</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Takes an image and performs blobdetection using the CMVision Player driver. Requires information provided by the camera (duh) and blobfinder proxies. Does not display blobs, merely draws rectangles around blobs identified by the blobfinder proxy. If you want to see them try using the <a class="el" href="classCamera.html#af4d89ca5c815928bdf8cf1cf8cb0f058">displayBlobs()</a> function. </p>

</div>
</div>
<a class="anchor" id="a7b2811cc03fcdafa686a76863f2847c1"></a><!-- doxytag: member="Camera::drawTetris" ref="a7b2811cc03fcdafa686a76863f2847c1" args="(IplImage *img, CvSeq *tetrisPieces)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Camera::drawTetris </td>
          <td>(</td>
          <td class="paramtype">IplImage *&nbsp;</td>
          <td class="paramname"> <em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CvSeq *&nbsp;</td>
          <td class="paramname"> <em>tetrisPieces</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Draws the identified Tetris pieces on the given image. </p>

</div>
</div>
<a class="anchor" id="a9d6533c84114b0724d28b940ed774362"></a><!-- doxytag: member="Camera::edgeDetection" ref="a9d6533c84114b0724d28b940ed774362" args="(IplImage *in, double lowThresh, double highThresh, double aperture)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IplImage * Camera::edgeDetection </td>
          <td>(</td>
          <td class="paramtype">IplImage *&nbsp;</td>
          <td class="paramname"> <em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>lowThresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>highThresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>aperture</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Converts IplImage* in to 1-channel to use <a class="el" href="classCamera.html#ac5c9f313998f788fa4924a1a341fd96a">doCanny()</a>. Just a convenience function to perform canny detection on a 3-channel IplImage*. </p>

</div>
</div>
<a class="anchor" id="a21b8d96617b3fede0373a7af8f998bb6"></a><!-- doxytag: member="Camera::findTetris" ref="a21b8d96617b3fede0373a7af8f998bb6" args="(IplImage *img, CvMemStorage *storage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CvSeq * Camera::findTetris </td>
          <td>(</td>
          <td class="paramtype">IplImage *&nbsp;</td>
          <td class="paramname"> <em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CvMemStorage *&nbsp;</td>
          <td class="paramname"> <em>storage</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a CvSeq (An OpenCV sequence) of Tetris pieces detected in an image. Based on the OpenCV example of identifying a square. Modified to detect L-shaped Tetris pieces. Effectiveness dependent upon thresholds of edge dectection and camera being positioned orthogonal to the Tetris piece. </p>

<p><p>Copy of image so that the detection is non-destructive</p>
<p>Gray scale needed</p>
<p>Smaller version to do scaling</p>
<p>6 points per tetris piece (the vertices)</p>
<p>find pieces in every color plane of the image</p>
<p>extract the c-th color plane</p>
<p>try several threshold levels</p>
<p>hack: use Canny instead of zero threshold level. Canny helps to catch tetrisPieces with gradient shading </p>
</p>

</div>
</div>
<a class="anchor" id="ae03f9b6de6de4ff54394006116901cf1"></a><!-- doxytag: member="Camera::loadCascade" ref="ae03f9b6de6de4ff54394006116901cf1" args="(const char *cascadeName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Camera::loadCascade </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>cascadeName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads the .xml file that holds the cascade information determined after performing Haar training. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="camera_8h_source.html">camera.h</a></li>
<li>camera.cpp</li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Mar 30 15:02:15 2010 for metroVision by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
